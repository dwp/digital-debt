{% import "macros/elements_forms.html" as elements_forms %}

{% extends "layouts/layout.html" %}

{% block page_title %}
  {{ (page.title + ' &ndash; ') | safe if page.title }}{{ serviceName }}
{% endblock %}

{% block body_classes %}{% if page.body_classes %}{% for class in page.body_classes %}{{ class }}{% if not loop.last and loop.length > 1 %} {% endif %}{% endfor %}{% endif %} {{ prototype.current.body_class }}{% endblock %}



{% block content %}

  <main id="content"{{ (' class="' + page.contentClasses + '"') | safe if page.contentClasses }}>  
     {% include "includes/phase_banner_alpha.html" %}  
    {% block main %}
      {% block prepend_main %}{% endblock %}
      <div class="grid-row">
        
        {% block __primary__ %}
          <div class="column-{{ page.primary.col | d('two-thirds') }}">
            {% block primary %}{% endblock %}
          </div>
        {% endblock %}
        
        {% block __secondary__ %}
          {% if page.secondary %}
          <div class="column-{{ page.secondary.col | d('one-third') }}">
            {% block secondary %}  
            {% endblock %}
          </div>
          {% endif %}
        {% endblock %}
      
      </div>
      {% block append_main %}{% endblock %}
    {% endblock %}
  </main>
{% endblock %}

{% block body_end %}
  {{ super() }}
  {% if page.dev %}
    {{ (serviceName + " context data: ") | log(true) }}
    {{ __locals__ | log }}
  {% endif %}

  <script>
////////////////////////////////////////////

  $(document).ready(function () {
      $('span').each(function () {
        if ($(this).attr('data-start')) {
          $(this).html($(this).attr('data-start'));
        }
      });
  });

    $(document).on('keyup', '#text-area', function () {
      var span = $(this).parents('.form-group').find('.form-hint span');
      var start = $(this).parents('.form-group').find('.form-hint span').attr('data-start');
      remaning = start - $(this).val().length;
      span.html(remaning);
    });

///////////////////////////////

    var totalDebt = 650.00; ///////// Total Debt /////////////
    var locale = "en-gb";
    var minRepaymentAmmount = 16.03; ///////// Min Payment /////////////

    $(document).on('keyup', '#value-adjust-1', function () {
      var that = $(this)[0];
      if(that.value > minRepaymentAmmount){
          var months = Math.ceil(totalDebt / that.value)
          var endDate = new Date();
          endDate.setMonth(endDate.getMonth() + months);
          
          $('#payed-by').css('font-weight','bold');
          $('#payed-by').html("1 " + endDate.toLocaleString(locale, { month: "long" }) + " " + endDate.getUTCFullYear());
      }
    });
///////////////////////////////////

</script>
{% endblock %}